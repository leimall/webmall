(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{9338:function(e,t,r){Promise.resolve().then(r.bind(r,3235))},638:function(e,t,r){"use strict";r.d(t,{an:function(){return o},bG:function(){return l},gS:function(){return d},y1:function(){return s},zB:function(){return n}});var i=r(6508);let o=()=>(0,i.Z)({url:"/auth/captcha",method:"post"}),n=e=>(0,i.Z)({url:"/auth/signin",method:"post",data:e}),s=e=>(0,i.Z)({url:"auth/signup",method:"post",data:e}),l=()=>(0,i.Z)({url:"/myself/info",method:"post"}),d=e=>(0,i.Z)({url:"/myself/update",method:"post",data:e})},3235:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var i=r(7437),o=r(2265),n=r(4069),s=r(7928),l=r(638);function d(){let{user:e,setUser:t}=(0,n.t)(),[r,d]=(0,o.useState)((null==e?void 0:e.userName)||""),[a,u]=(0,o.useState)((null==e?void 0:e.email)||""),[c,m]=(0,o.useState)((null==e?void 0:e.phone)||""),x=async()=>{try{await (0,l.bG)()}catch(e){s.ZP.error("Failed to fetch captcha")}};(0,o.useEffect)(()=>{x()},[]);let h=async e=>{e.preventDefault();try{let e=await (0,l.gS)({userName:r,email:a,phone:c});t(e.data),s.ZP.success("Profile updated successfully.")}catch(e){s.ZP.error("An error occurred. Please try again.")}};return(0,i.jsx)("div",{className:"relative mx-auto max-w-c-1280 py-5 items-center justify-between align-items:flex-end px-4 md:px-8 2xl:px-0",children:(0,i.jsxs)("div",{className:"bg-white w-full flex flex-col gap-5 px-3 md:px-16 lg:px-28 md:flex-row text-[#161931]",children:[(0,i.jsx)("div",{className:"hidden py-4 md:w-1/3 lg:w-1/4 md:block",children:(0,i.jsxs)("div",{className:"sticky flex flex-col gap-2 p-4 text-sm border-r border-indigo-100 top-12",children:[(0,i.jsx)("h2",{className:"pl-3 mb-4 text-2xl font-semibold",children:"Settings"}),(0,i.jsx)("a",{href:"#",className:"flex items-center px-3 py-2.5 font-bold bg-white text-indigo-900 border rounded-full",children:"Public Profile"}),(0,i.jsx)("a",{href:"#",className:"flex items-center px-3 py-2.5 font-semibold hover:text-indigo-900 hover:border hover:rounded-full",children:"Account Settings"}),(0,i.jsx)("a",{href:"#",className:"flex items-center px-3 py-2.5 font-semibold hover:text-indigo-900 hover:border hover:rounded-full",children:"Notifications"}),(0,i.jsx)("a",{href:"#",className:"flex items-center px-3 py-2.5 font-semibold hover:text-indigo-900 hover:border hover:rounded-full",children:"PRO Account"})]})}),(0,i.jsx)("div",{className:"w-full min-h-screen py-1 md:w-2/3 lg:w-3/4",children:(0,i.jsx)("div",{className:"p-2 md:p-4",children:(0,i.jsxs)("div",{className:"w-full px-6 pb-8 mt-8 sm:max-w-xl sm:rounded-lg",children:[(0,i.jsx)("h2",{className:"pl-6 text-2xl font-bold sm:text-xl",children:"Public Profile"}),(0,i.jsxs)("form",{onSubmit:h,className:"grid max-w-2xl mx-auto mt-8",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center space-y-5 sm:flex-row sm:space-y-0",children:[(0,i.jsx)("img",{className:"object-cover w-40 h-40 p-1 rounded-full ring-2 ring-indigo-300 dark:ring-indigo-500",src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGZhY2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",alt:"Bordered avatar"}),(0,i.jsxs)("div",{className:"flex flex-col space-y-5 sm:ml-8",children:[(0,i.jsx)("button",{type:"button",className:"py-3.5 px-7 text-base font-medium text-indigo-100 focus:outline-none bg-[#202142] rounded-lg border border-indigo-200 hover:bg-indigo-900 focus:z-10 focus:ring-4 focus:ring-indigo-200 ",children:"Change picture"}),(0,i.jsx)("button",{type:"button",className:"py-3.5 px-7 text-base font-medium text-indigo-900 focus:outline-none bg-white rounded-lg border border-indigo-200 hover:bg-indigo-100 hover:text-[#202142] focus:z-10 focus:ring-4 focus:ring-indigo-200 ",children:"Delete picture"})]})]}),(0,i.jsxs)("div",{className:"items-center mt-8 sm:mt-14 text-[#202142]",children:[(0,i.jsxs)("div",{className:"mb-2 sm:mb-6",children:[(0,i.jsx)("label",{htmlFor:"username",className:"block mb-2 text-sm font-medium text-indigo-900 dark:text-white",children:"Your name"}),(0,i.jsx)("input",{type:"text",id:"username",value:r,onChange:e=>d(e.target.value),className:"bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",placeholder:"Your name",required:!0})]}),(0,i.jsxs)("div",{className:"mb-2 sm:mb-6",children:[(0,i.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-indigo-900 dark:text-white",children:"Your email"}),(0,i.jsx)("input",{type:"email",id:"email",value:a,onChange:e=>u(e.target.value),className:"bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",placeholder:"Your email",required:!0})]}),(0,i.jsxs)("div",{className:"mb-2 sm:mb-6",children:[(0,i.jsx)("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-indigo-900 dark:text-white",children:"Phone"}),(0,i.jsx)("input",{type:"text",id:"phone",value:c,onChange:e=>m(e.target.value),className:"bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",placeholder:"Your phone",required:!0})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{type:"submit",className:"text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-800",children:"Save"})})]})]})]})})})]})})}},4069:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var i=r(9099),o=r(9291);let n=(0,i.Ue)()((0,o.tJ)(e=>({token:null,user:null,setUser:t=>e({user:t}),setAuth:(t,r)=>e({token:t,user:r}),clearAuth:()=>e({token:null,user:null})}),{name:"auth-storage",storage:(0,o.FL)(()=>localStorage),migrate:e=>!e.expiresAt||new Date(e.expiresAt)<new Date?{token:null,user:null}:e}))},6508:function(e,t,r){"use strict";var i=r(8472),o=r(7928),n=r(4069);let s=i.Z.create({baseURL:"https://api.dms.pub/api/web",timeout:5e3});s.interceptors.request.use(e=>{let{token:t,user:r}=n.t.getState();return t&&(e.headers=e.headers||{},e.headers["x-token"]=t),(null==r?void 0:r.userId)&&(e.headers=e.headers||{},e.headers["x-user-id"]=r.userId),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e},e=>(o.ZP.destroy,o.ZP.error({content:"请求错误，请稍后再试",duration:5}),Promise.reject(e))),s.interceptors.response.use(e=>{let{status:t,data:r}=e;if(200===t)return 0===r.code?r:Promise.reject(r)},e=>{let{response:t}=e,{clearAuth:r}=n.t.getState();return o.ZP.destroy(),JSON.stringify(e).includes("Network Error")?o.ZP.error({content:"网络超时",duration:5}):t&&401===t.status?(o.ZP.error({content:"未授权，请重新登录",duration:5}),r()):o.ZP.error({content:"请求错误，状态码：".concat(null==t?void 0:t.status),duration:5}),Promise.reject(e)}),t.Z=s}},function(e){e.O(0,[733,81,106,151,69,472,971,23,744],function(){return e(e.s=9338)}),_N_E=e.O()}]);