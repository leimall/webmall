(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{7696:function(t,e,r){Promise.resolve().then(r.bind(r,7398))},4110:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var a=r(2265),n=r(6800),i=r.n(n),o=r(8750),c=r(7540),s=r(8170),l=r(2330),d=r(5413);let u=t=>{let{componentCls:e,sizePaddingEdgeHorizontal:r,colorSplit:a,lineWidth:n,textPaddingInline:i,orientationMargin:o,verticalMarginInline:l}=t;return{[e]:Object.assign(Object.assign({},(0,s.Wf)(t)),{borderBlockStart:"".concat((0,c.bf)(n)," solid ").concat(a),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:l,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,c.bf)(n)," solid ").concat(a)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,c.bf)(t.dividerHorizontalGutterMargin)," 0")},["&-horizontal".concat(e,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,c.bf)(t.dividerHorizontalWithTextGutterMargin)," 0"),color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(a),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,c.bf)(n)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(e,"-with-text-left")]:{"&::before":{width:"calc(".concat(o," * 100%)")},"&::after":{width:"calc(100% - ".concat(o," * 100%)")}},["&-horizontal".concat(e,"-with-text-right")]:{"&::before":{width:"calc(100% - ".concat(o," * 100%)")},"&::after":{width:"calc(".concat(o," * 100%)")}},["".concat(e,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:i},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:"".concat((0,c.bf)(n)," 0 0")},["&-horizontal".concat(e,"-with-text").concat(e,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(e,"-dashed")]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:"".concat((0,c.bf)(n)," 0 0")},["&-horizontal".concat(e,"-with-text").concat(e,"-dotted")]:{"&::before, &::after":{borderStyle:"dotted none none"}},["&-vertical".concat(e,"-dotted")]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(e,"-with-text")]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},["&-horizontal".concat(e,"-with-text-left").concat(e,"-no-default-orientation-margin-left")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(e,"-inner-text")]:{paddingInlineStart:r}},["&-horizontal".concat(e,"-with-text-right").concat(e,"-no-default-orientation-margin-right")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(e,"-inner-text")]:{paddingInlineEnd:r}}})}};var m=(0,l.I$)("Divider",t=>[u((0,d.IX)(t,{dividerHorizontalWithTextGutterMargin:t.margin,dividerHorizontalGutterMargin:t.marginLG,sizePaddingEdgeHorizontal:0}))],t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS}),{unitless:{orientationMargin:!0}}),h=function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&0>e.indexOf(a)&&(r[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)0>e.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r},p=t=>{let{getPrefixCls:e,direction:r,divider:n}=a.useContext(o.E_),{prefixCls:c,type:s="horizontal",orientation:l="center",orientationMargin:d,className:u,rootClassName:p,children:f,dashed:x,variant:b="solid",plain:g,style:y}=t,w=h(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),v=e("divider",c),[j,C,P]=m(v),N=!!f,S="left"===l&&null!=d,k="right"===l&&null!=d,I=i()(v,null==n?void 0:n.className,C,P,"".concat(v,"-").concat(s),{["".concat(v,"-with-text")]:N,["".concat(v,"-with-text-").concat(l)]:N,["".concat(v,"-dashed")]:!!x,["".concat(v,"-").concat(b)]:"solid"!==b,["".concat(v,"-plain")]:!!g,["".concat(v,"-rtl")]:"rtl"===r,["".concat(v,"-no-default-orientation-margin-left")]:S,["".concat(v,"-no-default-orientation-margin-right")]:k},u,p),Z=a.useMemo(()=>"number"==typeof d?d:/^\d+$/.test(d)?Number(d):d,[d]),q=Object.assign(Object.assign({},S&&{marginLeft:Z}),k&&{marginRight:Z});return j(a.createElement("div",Object.assign({className:I,style:Object.assign(Object.assign({},null==n?void 0:n.style),y)},w,{role:"separator"}),f&&"vertical"!==s&&a.createElement("span",{className:"".concat(v,"-inner-text"),style:q},f)))}},6463:function(t,e,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(e,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(e,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(e,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(e,{useSearchParams:function(){return a.useSearchParams}})},638:function(t,e,r){"use strict";r.d(e,{an:function(){return n},bG:function(){return c},gS:function(){return s},y1:function(){return o},zB:function(){return i}});var a=r(6508);let n=()=>(0,a.Z)({url:"/auth/captcha",method:"post"}),i=t=>(0,a.Z)({url:"/auth/signin",method:"post",data:t}),o=t=>(0,a.Z)({url:"auth/signup",method:"post",data:t}),c=()=>(0,a.Z)({url:"/myself/info",method:"post"}),s=t=>(0,a.Z)({url:"/myself/update",method:"post",data:t})},7398:function(t,e,r){"use strict";r.d(e,{default:function(){return h}});var a=r(7437),n=r(7928),i=r(4110),o=r(638),c=r(6648),s=r(7138),l=r(2265),d=r(6463),u=r(4069),m=r(9910);function h(){let{fetchCartItems:t}=(0,m.x)(),[e,r]=(0,l.useState)(null),[h,p]=(0,l.useState)(""),[f,x]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[v,j]=(0,l.useState)(!1),C=(0,d.useRouter)(),P=(0,u.t)(t=>t.setAuth),N=async()=>{try{let t=await (0,o.an)();r(t.data),p(t.data.captchaId)}catch(t){n.ZP.error("Failed to fetch captcha")}};(0,l.useEffect)(()=>{N()},[]);let S=()=>f?b?y?!!v||(n.ZP.error("I agree to the terms and conditions is required"),!1):(n.ZP.error("Captcha is required"),!1):(n.ZP.error("Password is required"),!1):(n.ZP.error("Email is required"),!1),k=async e=>{if(e.preventDefault(),S()&&v)try{let{token:e,user:r}=(await (0,o.zB)({email:f,password:b,captcha:y,captchaId:h})).data;P(e,r),t(),n.ZP.success("Signed in successfully"),C.push("/")}catch(t){n.ZP.error(" to sign in"),w(""),N()}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("section",{className:"py-4 md:py-20",children:(0,a.jsx)("div",{className:"font-[sans-serif] relative",children:(0,a.jsx)("div",{className:"relative m-4",children:(0,a.jsxs)("form",{className:"bg-white max-w-xl w-full mx-auto shadow-md p-4 md:p-16 rounded-2xl",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsx)("h3",{className:"text-gray-800 text-3xl font-bold text-center",children:"Sign in"})}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("label",{className:"text-gray-800 text-xs block mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"email",type:"text",required:!0,value:f,onChange:t=>x(t.target.value),className:"w-full bg-transparent text-sm text-gray-800 border-b border-gray-300 focus:border-fta-primary-400 px-2 py-3 outline-none",placeholder:"Enter email"}),(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#bbb",stroke:"#bbb",className:"w-[18px] h-[18px] absolute right-2",viewBox:"0 0 682.667 682.667",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"a",clipPathUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M0 512h512V0H0Z","data-original":"#000000"})})}),(0,a.jsxs)("g",{clipPath:"url(#a)",transform:"matrix(1.33 0 0 -1.33 0 682.667)",children:[(0,a.jsx)("path",{fill:"none",strokeMiterlimit:"10",strokeWidth:"40",d:"M452 444H60c-22.091 0-40-17.909-40-40v-39.446l212.127-157.782c14.17-10.54 33.576-10.54 47.746 0L492 364.554V404c0 22.091-17.909 40-40 40Z","data-original":"#000000"}),(0,a.jsx)("path",{d:"M472 274.9V107.999c0-11.027-8.972-20-20-20H60c-11.028 0-20 8.973-20 20V274.9L0 304.652V107.999c0-33.084 26.916-60 60-60h392c33.084 0 60 26.916 60 60v196.653Z","data-original":"#000000"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("label",{className:"text-gray-800 text-xs block mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"password",type:"password",required:!0,value:b,onChange:t=>g(t.target.value),className:"w-full bg-transparent text-sm text-gray-800 border-b border-gray-300 focus:border-fta-primary-400 px-2 py-3 outline-none",placeholder:"Enter password"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#bbb",stroke:"#bbb",className:"w-[18px] h-[18px] absolute right-2 cursor-pointer",viewBox:"0 0 128 128",children:(0,a.jsx)("path",{d:"M64 104C22.127 104 1.367 67.496.504 65.943a4 4 0 0 1 0-3.887C1.367 60.504 22.127 24 64 24s62.633 36.504 63.496 38.057a4 4 0 0 1 0 3.887C126.633 67.496 105.873 104 64 104zM8.707 63.994C13.465 71.205 32.146 96 64 96c31.955 0 50.553-24.775 55.293-31.994C114.535 56.795 95.854 32 64 32 32.045 32 13.447 56.775 8.707 63.994zM64 88c-13.234 0-24-10.766-24-24s10.766-24 24-24 24 10.766 24 24-10.766 24-24 24zm0-40c-8.822 0-16 7.178-16 16s7.178 16 16 16 16-7.178 16-16-7.178-16-16-16z","data-original":"#000000"})})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("label",{className:"text-gray-800 text-xs block mb-2",children:"Captcha"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"w-2/3 relative flex items-center",children:(0,a.jsx)("input",{name:"captcha",type:"text",required:!0,value:y,onChange:t=>w(t.target.value),className:"w-full bg-transparent text-sm text-gray-800 border-b border-gray-300 focus:border-fta-primary-400 px-2 py-3 outline-none",placeholder:"Enter captcha"})}),(0,a.jsx)("div",{className:"pl-4 cursor-pointer",onClick:N,children:(null==e?void 0:e.picPath)&&(0,a.jsx)(c.default,{src:e.picPath,alt:"Captcha",width:140,height:60})})]})]}),(0,a.jsxs)("div",{className:"flex items-center mt-8",children:[(0,a.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:v,onChange:t=>j(t.target.checked),className:"h-4 w-4 shrink-0 rounded bg-fta-primary-500"}),(0,a.jsxs)("label",{className:"ml-3 block text-sm",children:["I accept the ",(0,a.jsx)("a",{href:"/",className:"text-fta-primary-400 font-semibold hover:underline ml-1",children:"Terms and Conditions"})]})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("button",{type:"button",className:"w-full shadow-xl py-2.5 px-5 text-sm font-semibold tracking-wider rounded-md text-white bg-fta-primary-500 hover:bg-fta-primary-400 focus:outline-none transition-all",onClick:k,children:"Sign in"})}),(0,a.jsxs)("div",{className:"pt-10",children:[(0,a.jsx)(i.Z,{children:(0,a.jsx)("span",{className:"text-gray-800 text-sm mt-8 text-center",children:" New to FTAnails? "})}),(0,a.jsx)(s.default,{href:"/auth/signup",children:(0,a.jsx)("p",{className:"border-2 border-fta-background-200 p-1 rounded-md text-fta-primary-400 text-center font-semibold hover:underline ml-1 border-spacing-1",children:"Create your FTAnails account"})})]})]})})})})})}},9910:function(t,e,r){"use strict";r.d(e,{x:function(){return u}});var a=r(9099),n=r(9291),i=r(6508);let o=()=>(0,i.Z)({url:"/cart/list",method:"post"}),c=t=>(0,i.Z)({url:"/cart/add",method:"post",data:t}),s=t=>(0,i.Z)({url:"/cart/update",method:"post",data:t}),l=t=>(0,i.Z)({url:"/cart/delete",method:"post",data:t}),d=t=>(0,i.Z)({url:"/cart/deleteone",method:"post",data:t}),u=(0,a.Ue)()((0,n.tJ)((t,e)=>({items:[],totalQuantity:0,totalPrice:0,price:0,discount:0,couponCode:null,addItem:r=>t(t=>{let a,n=t.items.filter(t=>null!==t);n.find(t=>t.product_id===r.product_id)?(a=n.map(t=>t.product_id===r.product_id?{...t,quantity:t.quantity+r.quantity}:t),setImmediate(async()=>{await e().updateCart(r)})):(a=[...n,r],setImmediate(async()=>{await e().createCart(r)}));let i=a.reduce((t,e)=>t+e.price*e.quantity,0);return{items:a,totalQuantity:a.reduce((t,e)=>t+e.quantity,0),price:a.reduce((t,e)=>t+e.old_price*e.quantity,0),totalPrice:i-e().discount}}),removeItem:r=>t(t=>{if(t.items.filter(t=>t.product_id===r).length>0){let a=t.items.filter(t=>t.product_id!==r),n=a.reduce((t,e)=>t+e.price*e.quantity,0);return{items:a,totalQuantity:a.reduce((t,e)=>t+e.quantity,0),price:a.reduce((t,e)=>t+e.old_price*e.quantity,0),totalPrice:n-e().discount}}return t}),clearCart:()=>{t({items:[],totalQuantity:0,totalPrice:0,discount:0,couponCode:null})},setQuantity:(r,a)=>t(t=>{let n=t.items.filter(t=>null!==t),i=n.map(t=>t.product_id===r?{...t,quantity:Math.max(0,a)}:t).filter(t=>t.quantity>0),o=i.reduce((t,e)=>t+e.price*e.quantity,0),c=n.find(t=>t.product_id===r);return c&&setImmediate(async()=>{await e().updateCart({...c,quantity:a})}),{items:i,totalQuantity:i.reduce((t,e)=>t+e.quantity,0),price:i.reduce((t,e)=>t+e.old_price*e.quantity,0),totalPrice:o-e().discount}}),setSkuValue:(r,a)=>t(t=>{let n=t.items.filter(t=>null!==t),i=n.map(t=>t.product_id===r?{...t,size:a}:t).filter(t=>t.quantity>0),o=n.find(t=>t.product_id===r);return o&&setImmediate(async()=>{await e().updateCart(o)}),{items:i}}),applyCoupon:(r,a)=>{t({couponCode:r,discount:a,totalPrice:e().items.reduce((t,e)=>t+e.price*e.quantity,0)-a})},removeCoupon:()=>{t({couponCode:null,discount:0,totalPrice:e().items.reduce((t,e)=>t+e.price*e.quantity,0)})},fetchCartItems:async()=>{let e=await o();console.error("fetchCartItems response  object",e);let r=e.data;if(null==r?void 0:r.length){let e=r.reduce((t,e)=>t+e.price*e.quantity,0),a=r.reduce((t,e)=>t+e.quantity,0),n=r.reduce((t,e)=>t+e.old_price*e.quantity,0);t({items:r,totalPrice:e,totalQuantity:a,price:n})}else t({items:[]})},updateCart:async t=>{console.error("updateCartItem",await s(t))},deleteCart:async t=>{console.error("deleteCartItem",await l(t))},deleteCartOne:async t=>{console.error("deleteCartItemOne",await d(t))},createCart:async t=>{console.error("createCartItem",await c(t))}}),{name:"cart-storage",storage:(0,n.FL)(()=>localStorage)}))},4069:function(t,e,r){"use strict";r.d(e,{t:function(){return i}});var a=r(9099),n=r(9291);let i=(0,a.Ue)()((0,n.tJ)(t=>({token:null,user:null,setUser:e=>t({user:e}),setAuth:(e,r)=>t({token:e,user:r}),clearAuth:()=>t({token:null,user:null})}),{name:"auth-storage",storage:(0,n.FL)(()=>localStorage),migrate:t=>!t.expiresAt||new Date(t.expiresAt)<new Date?{token:null,user:null}:t}))},6508:function(t,e,r){"use strict";var a=r(8472),n=r(7928),i=r(4069);let o=a.Z.create({baseURL:"https://api.dms.pub/api/web",timeout:5e3});o.interceptors.request.use(t=>{let{token:e,user:r}=i.t.getState();return e&&(t.headers=t.headers||{},t.headers["x-token"]=e),(null==r?void 0:r.userId)&&(t.headers=t.headers||{},t.headers["x-user-id"]=r.userId),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t},t=>(n.ZP.destroy,n.ZP.error({content:"请求错误，请稍后再试",duration:5}),Promise.reject(t))),o.interceptors.response.use(t=>{let{status:e,data:r}=t;if(200===e)return 0===r.code?r:Promise.reject(r)},t=>{let{response:e}=t,{clearAuth:r}=i.t.getState();return n.ZP.destroy(),JSON.stringify(t).includes("Network Error")?n.ZP.error({content:"网络超时",duration:5}):e&&401===e.status?(n.ZP.error({content:"未授权，请重新登录",duration:5}),r()):n.ZP.error({content:"请求错误，状态码：".concat(null==e?void 0:e.status),duration:5}),Promise.reject(t)}),e.Z=o}},function(t){t.O(0,[925,106,633,648,138,971,23,744],function(){return t(t.s=7696)}),_N_E=t.O()}]);