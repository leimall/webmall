(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{9957:function(e,s,r){Promise.resolve().then(r.bind(r,8644))},5237:function(e,s,r){"use strict";r.d(s,{V5:function(){return a},l4:function(){return i},rZ:function(){return l}});var t=r(6508);let l=()=>(0,t.Z)({url:"/common/constry",method:"get"}),a=()=>(0,t.Z)({url:"/myself/address",method:"get"}),i=e=>(0,t.Z)({url:"/myself/address",method:"post",data:e})},8644:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var t=r(7437),l=r(6648);function a(e){let{item:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"rounded-md",children:(0,t.jsx)("div",{className:"items-center",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-32 h-32 shrink-0 border rounded bg-white",children:(0,t.jsx)(l.default,{src:s.main_img,alt:s.title,objectFit:"fixed",width:96,height:96,className:"rounded h-full w-full "})}),(0,t.jsxs)("div",{className:"w-full ml-4 text-fta-primary-600",children:[(0,t.jsx)("div",{className:"text-sm text-pretty font-extrabold text-fta-primary-600 h-10 line-clamp-2",children:s.title}),(0,t.jsxs)("div",{className:"flex justify-between items-center font-sans py-1",children:[(0,t.jsx)("div",{className:"text-sm",children:"Size:"}),(0,t.jsx)("div",{className:" text-sm",children:s.size})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center font-sans py-1",children:[(0,t.jsx)("div",{className:"text-sm",children:"Quantity:"}),(0,t.jsx)("div",{className:" text-sm",children:s.quantity})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center font-sans py-1",children:[(0,t.jsx)("div",{className:"text-sm",children:"Price:"}),(0,t.jsxs)("div",{className:"text-sm",children:["$",s.price*s.quantity]})]})]})]})})}),(0,t.jsx)("hr",{className:"border-gray-black my-6"})]})}var i=r(7840),n=r(8347),d=r(7394),c=r(1080),u=r(7185),o=r(7631),m=r(8951),x=r(9200),h=r(8924),j=r(2265),p=r(9262),f=r(5237);let{Panel:v}=i.default,{Option:y}=n.default;var g=()=>{let[e,s]=(0,j.useState)([]),[r,l]=(0,j.useState)(!1),[g,N]=(0,j.useState)([]),[b,Z]=(0,j.useState)(!1),{order:P}=(0,p.L)();(0,j.useEffect)(()=>{(null==P?void 0:P.products)&&N(null==P?void 0:P.products),w()},[P]);let w=async()=>{let e=await (0,f.V5)();if(0===e.code){var r,t;s(null!==(t=null===(r=e.data)||void 0===r?void 0:r.list)&&void 0!==t?t:[])}};return(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,{gap:"middle",vertical:!0,children:(0,t.jsx)(c.Z,{spinning:b,size:"large",tip:"Loading...",children:(0,t.jsx)("div",{className:"relative mx-auto max-w-c-1280 py-5 justify-between align-items:flex-end px-2 md:px-8 2xl:px-0",children:(0,t.jsxs)("div",{className:"flex flex-col  md:flex-row ",children:[(0,t.jsxs)("div",{className:"w-full md:w-4/6",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 pb-4",children:e.length>0&&e.map(e=>(0,t.jsxs)(u.Z,{size:"small",style:{border:"1px solid blue"},children:[(0,t.jsxs)("p",{className:"font-bold",children:[e.firstName," ",e.lastName," ",e.phone]}),(0,t.jsxs)("p",{children:[e.street1," ",e.street2," ",e.city,", ",e.region,", ",e.country]}),(0,t.jsx)("p",{children:e.zipCode})]},e.ID))}),(0,t.jsx)(o.Z,{name:"checkout",initialValues:{remember:!0},onFinish:e=>{console.log("Success:",e)},onFinishFailed:e=>{console.log("Failed:",e)},layout:"vertical",children:(0,t.jsxs)(i.default,{defaultActiveKey:["1"],children:[(0,t.jsxs)(v,{header:"Personal Details",children:[(0,t.jsx)(o.Z.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Email Address",name:"email",rules:[{required:!0,message:"Please input your email address!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Phone",name:"phone",rules:[{required:!0,message:"Please input your phone number!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Mailing Address",name:"mailingAddress",rules:[{required:!0,message:"Please input your mailing address!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"City",name:"city",rules:[{required:!0,message:"Please input your city!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Post Code",name:"postCode",rules:[{required:!0,message:"Please input your post code!"}],children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)(o.Z.Item,{label:"Country",name:"country",rules:[{required:!0,message:"Please select your country!"}],children:(0,t.jsxs)(n.default,{children:[(0,t.jsx)(y,{value:"USA",children:"USA"}),(0,t.jsx)(y,{value:"Canada",children:"Canada"}),(0,t.jsx)(y,{value:"UK",children:"UK"})]})}),(0,t.jsx)(o.Z.Item,{label:"Region/State",name:"region",rules:[{required:!0,message:"Please select your region/state!"}],children:(0,t.jsxs)(n.default,{children:[(0,t.jsx)(y,{value:"California",children:"California"}),(0,t.jsx)(y,{value:"Texas",children:"Texas"}),(0,t.jsx)(y,{value:"New York",children:"New York"})]})}),(0,t.jsx)(o.Z.Item,{name:"sameAddress",valuePropName:"checked",children:(0,t.jsx)(x.Z,{onChange:e=>l(e.target.checked),children:"My delivery and mailing addresses are the same."})}),(0,t.jsx)(o.Z.Item,{children:(0,t.jsx)(h.ZP,{type:"primary",htmlType:"submit",children:"Next Step"})})]},"1"),r&&(0,t.jsx)(v,{header:"Shipping Address"},"2"),(0,t.jsx)(v,{header:"Payment method"},"3")]})})]}),(0,t.jsx)("div",{className:"w-full md:w-2/6 md:ml-8 sx:ml-0 ",children:(0,t.jsxs)("div",{className:"border rounded-md md:mt-0 mt-4 sm:ml-0 p-4 bg-background-back1",children:[g.map(e=>(0,t.jsx)(a,{item:e},e.product_id)),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"text-md font-bold",children:"Total:"}),(0,t.jsxs)("div",{className:"text-md font-bold text-red-600",children:["$",null==P?void 0:P.totalPrice.toFixed(2)]})]})]})})]})})})})})}},9262:function(e,s,r){"use strict";r.d(s,{L:function(){return a}});var t=r(9099),l=r(9291);let a=(0,t.Ue)()((0,l.tJ)(e=>({order:null,addProduct:s=>e(e=>{if(!e.order)return{order:null};let r=[...e.order.products,s],t=r.reduce((e,s)=>e+s.price*s.quantity,0);return{order:{...e.order,products:r,totalPrice:t}}}),createOrder:s=>e(()=>({order:s})),removeProduct:s=>e(e=>{if(!e.order)return{order:null};let r=e.order.products.filter(e=>e.product_id!==s),t=r.reduce((e,s)=>e+s.price*s.quantity,0);return{order:{...e.order,products:r,totalPrice:t}}}),updateOrder:s=>e(e=>({order:e.order?{...e.order,...s}:null})),clearOrder:()=>e(()=>({order:null}))}),{name:"order-storage",storage:(0,l.FL)(()=>localStorage)}))},4069:function(e,s,r){"use strict";r.d(s,{t:function(){return a}});var t=r(9099),l=r(9291);let a=(0,t.Ue)()((0,l.tJ)(e=>({token:null,user:null,setUser:s=>e({user:s}),setAuth:(s,r)=>e({token:s,user:r}),clearAuth:()=>e({token:null,user:null})}),{name:"auth-storage",storage:(0,l.FL)(()=>localStorage),migrate:e=>!e.expiresAt||new Date(e.expiresAt)<new Date?{token:null,user:null}:e}))},6508:function(e,s,r){"use strict";var t=r(8472),l=r(7928),a=r(4069);let i=t.Z.create({baseURL:"https://api.dms.pub/api/web",timeout:5e3});i.interceptors.request.use(e=>{let{token:s,user:r}=a.t.getState();return s&&(e.headers=e.headers||{},e.headers["x-token"]=s),(null==r?void 0:r.userId)&&(e.headers=e.headers||{},e.headers["x-user-id"]=r.userId),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e},e=>(l.ZP.destroy,l.ZP.error({content:"请求错误，请稍后再试",duration:5}),Promise.reject(e))),i.interceptors.response.use(e=>{let{status:s,data:r}=e;if(200===s)return 0===r.code?r:Promise.reject(r)},e=>{let{response:s}=e,{clearAuth:r}=a.t.getState();return l.ZP.destroy(),JSON.stringify(e).includes("Network Error")?l.ZP.error({content:"网络超时",duration:5}):s&&401===s.status?(l.ZP.error({content:"未授权，请重新登录",duration:5}),r()):l.ZP.error({content:"请求错误，状态码：".concat(null==s?void 0:s.status),duration:5}),Promise.reject(e)}),s.Z=i}},function(e){e.O(0,[925,633,648,566,625,924,181,549,466,887,291,971,23,744],function(){return e(e.s=9957)}),_N_E=e.O()}]);